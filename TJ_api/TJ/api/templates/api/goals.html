{% extends "api/base.html" %}
{% block title %}Goals{% endblock %}

{% block extra_css %}
    <style>
    .goal-item {
        background-color: #ffffff;
        border: 1px solid #e0e0e0;
        border-radius: 5px;
        padding: 15px;
        margin-bottom: 15px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .goal-item:hover {
        background-color: #f7f6f3;
    }
    .goal-checkbox {
        margin-right: 10px;
    }
    .add-goal {
        color: #a3a3a2;
        cursor: pointer;
        padding: 15px;
        border: 1px dashed #e0e0e0;
        border-radius: 5px;
        display: inline-block;
    }
    .add-goal:hover {
        color: var(--primary-color);
        background-color: #f7f6f3;
    }
    </style>
{% endblock extra_css %}

{% block content %}
<h1 class="mb-4">My Goals</h1>
<div id="goals-list">
  <div class="goal-item">
    <input type="checkbox" class="goal-checkbox"> Learn a new programming language
  </div>
  <div class="goal-item">
    <input type="checkbox" class="goal-checkbox"> Read 20 books this year
  </div>
  <div class="goal-item">
    <input type="checkbox" class="goal-checkbox"> Run a marathon
  </div>
  <div class="goal-item">
    <input type="checkbox" class="goal-checkbox"> Start a side project
  </div>
  <div class="add-goal">
    <i class="fas fa-plus me-2"></i> Add a new goal
  </div>
</div>
{% endblock content %}

{% block extra_js %}
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Goal item click handler
        document.querySelectorAll('.goal-item').forEach(item => {
        item.addEventListener('click', event => {
            if (event.target.type !== 'checkbox') {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            }
        });
        });

        // Add new goal handler
        document.querySelector('.add-goal').addEventListener('click', () => {
        const newGoal = prompt('Enter a new goal:');
        if (newGoal) {
            const goalsList = document.getElementById('goals-list');
            const newGoalItem = document.createElement('div');
            newGoalItem.className = 'goal-item';
            newGoalItem.innerHTML = `<input type="checkbox" class="goal-checkbox"> ${newGoal}`;
            goalsList.insertBefore(newGoalItem, goalsList.lastElementChild);

            newGoalItem.addEventListener('click', event => {
            if (event.target.type !== 'checkbox') {
                const checkbox = newGoalItem.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
            }
            });
        }
        });
    });
    </script>
{% endblock extra_js %}